<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="497px" preserveAspectRatio="none" style="width:727px;height:497px;" version="1.1" viewBox="0 0 727 497" width="727px" zoomAndPan="magnify"><defs><filter height="300%" id="ftax9xf26tien" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="76" x="332" y="16.708">tlsrouter</text><!--cluster Kubernetes cluster--><polygon fill="#FFFFFF" filter="url(#ftax9xf26tien)" points="162.5,44.9531,321.5,44.9531,328.5,67.25,705.5,67.25,705.5,369.9531,162.5,369.9531,162.5,44.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="162.5" x2="328.5" y1="67.25" y2="67.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="166.5" y="59.9482">Kubernetes cluster</text><!--cluster Service Namespace (id:x)--><polygon fill="#FFFFFF" filter="url(#ftax9xf26tien)" points="186.5,87.9531,393.5,87.9531,400.5,110.25,412.5,110.25,412.5,345.9531,186.5,345.9531,186.5,87.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="186.5" x2="400.5" y1="110.25" y2="110.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="190.5" y="102.9482">Service Namespace (id:x)</text><!--cluster Default Namespace (id:0)--><polygon fill="#FFFFFF" filter="url(#ftax9xf26tien)" points="451.5,248.9531,656.5,248.9531,663.5,271.25,681.5,271.25,681.5,345.9531,451.5,345.9531,451.5,248.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="451.5" x2="663.5" y1="271.25" y2="271.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="455.5" y="263.9482">Default Namespace (id:0)</text><!--entity tlsrouter_service--><rect fill="#FEFECE" filter="url(#ftax9xf26tien)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="203" y="122.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="376" y="127.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="374" y="129.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="374" y="133.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="218" y="155.9482">tlsrouter-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="218" y="172.2451">myproxy.example.com</text><!--entity tlsrouter_container--><rect fill="#FEFECE" filter="url(#ftax9xf26tien)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="202.5" y="283.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="350.5" y="288.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="348.5" y="290.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="348.5" y="294.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="217.5" y="316.9482">tlsrouter-container</text><!--entity kubernetes_service--><rect fill="#FEFECE" filter="url(#ftax9xf26tien)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="467.5" y="283.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="645.5" y="288.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="643.5" y="290.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="643.5" y="294.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="482.5" y="316.9482">kubernetes.default.svc</text><!--entity kubectl--><rect fill="#FEFECE" filter="url(#ftax9xf26tien)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="6" y="131.4531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="77" y="136.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="75" y="138.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="75" y="142.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="21" y="164.4482">kubectl</text><polygon fill="#FBFB77" filter="url(#ftax9xf26tien)" points="217,416.9531,217,442.0859,356,442.0859,356,426.9531,346,416.9531,217,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="217,416.9531,217,442.0859,356,442.0859,356,426.9531,346,416.9531,290.5,416.9531,286.5,330.0551,282.5,416.9531,217,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="346" y1="416.9531" y2="426.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="356" x2="346" y1="426.9531" y2="426.9531"/><ellipse cx="228.5" cy="429.5859" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="234" y="434.02">TLS Passthrough</text><polygon fill="#FBFB77" filter="url(#ftax9xf26tien)" points="499,416.9531,499,442.0859,634,442.0859,634,426.9531,624,416.9531,499,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="499,416.9531,499,442.0859,634,442.0859,634,426.9531,624,416.9531,570.5,416.9531,566.5,330.0551,562.5,416.9531,499,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624" x2="624" y1="416.9531" y2="426.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="634" x2="624" y1="426.9531" y2="426.9531"/><ellipse cx="510.5" cy="429.5859" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="516" y="434.02">TLS Termination</text><!--link kubectl to tlsrouter_service--><path d="M97.276,154.4531 C125.489,154.4531 162.835,154.4531 197.747,154.4531 " fill="none" id="kubectl-tlsrouter_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="202.879,154.4531,193.879,150.4531,197.879,154.4531,193.879,158.4531,202.879,154.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="115.5" y="147.52">HTTPS/443</text><!--link tlsrouter_service to tlsrouter_container--><path d="M296.838,186.2721 C294.484,213.5231 291.084,252.8841 288.834,278.9281 " fill="none" id="tlsrouter_service-tlsrouter_container" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="288.4,283.9521,293.1592,275.3295,288.83,278.9706,285.1888,274.6415,288.4,283.9521" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="294.5" y="229.02">HTTPS/8443</text><!--link tlsrouter_container to kubernetes_service--><path d="M370.509,306.9531 C399.289,306.9531 431.849,306.9531 462.046,306.9531 " fill="none" id="tlsrouter_container-kubernetes_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="467.262,306.9531,458.262,302.9531,462.262,306.9531,458.262,310.9531,467.262,306.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="389" y="300.02">HTTP/443</text><rect fill="#DDDDDD" height="26.2969" rx="5" ry="5" style="stroke: #000000; stroke-width: 1.0;" width="330" x="204.5" y="459.9531"/><ellipse cx="216" cy="473.75" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="305" x="223.5" y="477.9482">Every namespace is joined with network id:0</text><!--
@startuml

title tlsrouter
skinparam componentStyle uml2

component kubectl

package "Kubernetes cluster" {
  package "Service Namespace (id:x)" {
    component "tlsrouter-service\nmyproxy.example.com" as tlsrouter_service
    component "tlsrouter-container" as tlsrouter_container
  }

  package "Default Namespace (id:0)" {
    component "kubernetes.default.svc" as kubernetes_service
  }
}

kubectl -r-> tlsrouter_service : HTTPS/443
tlsrouter_service -d-> tlsrouter_container : HTTPS/8443
tlsrouter_container -r-> kubernetes_service : HTTP/443

note bottom of tlsrouter_container
  * TLS Passthrough
end note

note bottom of kubernetes_service
  * TLS Termination
end note

legend
  * Every namespace is joined with network id:0
end legend
@enduml

PlantUML version 1.2017.19(Sun Nov 12 22:46:22 AEDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 4.4.0-137-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
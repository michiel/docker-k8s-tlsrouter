<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="860px" preserveAspectRatio="none" style="width:1432px;height:860px;" version="1.1" viewBox="0 0 1432 860" width="1432px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n69f9y88x016" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="152" x="653" y="33.416">tlsrouter</text><!--cluster Service Namespace (id:x)--><polygon fill="#FFFFFF" filter="url(#f1n69f9y88x016)" points="373,89.9063,787,89.9063,801,134.5,825,134.5,825,605.9063,373,605.9063,373,89.9063" style="stroke: #000000; stroke-width: 4.0;"/><line style="stroke: #000000; stroke-width: 4.0;" x1="373" x2="801" y1="134.5" y2="134.5"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="402" x="381" y="119.8965">Service Namespace (id:x)</text><!--cluster Default Namespace (id:0)--><polygon fill="#FFFFFF" filter="url(#f1n69f9y88x016)" points="929,411.9063,1339,411.9063,1353,456.5,1389,456.5,1389,605.9063,929,605.9063,929,411.9063" style="stroke: #000000; stroke-width: 4.0;"/><line style="stroke: #000000; stroke-width: 4.0;" x1="929" x2="1353" y1="456.5" y2="456.5"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="398" x="937" y="441.8965">Default Namespace (id:0)</text><!--entity tlsrouter_service--><rect fill="#FEFECE" filter="url(#f1n69f9y88x016)" height="125.1875" style="stroke: #A80036; stroke-width: 3.0;" width="386" x="406" y="159.9063"/><rect fill="#FEFECE" height="20" style="stroke: #A80036; stroke-width: 3.0;" width="30" x="752" y="169.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="748" y="173.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="748" y="181.9063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="224" x="436" y="225.8965">tlsrouter-service</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="306" x="436" y="258.4902">myproxy.example.com</text><!--entity tlsrouter_container--><rect fill="#FEFECE" filter="url(#f1n69f9y88x016)" height="92.5938" style="stroke: #A80036; stroke-width: 3.0;" width="336" x="431" y="481.9063"/><rect fill="#FEFECE" height="20" style="stroke: #A80036; stroke-width: 3.0;" width="30" x="727" y="491.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="723" y="495.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="723" y="503.9063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="256" x="461" y="547.8965">tlsrouter-container</text><!--entity kubernetes_service--><rect fill="#FEFECE" filter="url(#f1n69f9y88x016)" height="92.5938" style="stroke: #A80036; stroke-width: 3.0;" width="396" x="961" y="481.9063"/><rect fill="#FEFECE" height="20" style="stroke: #A80036; stroke-width: 3.0;" width="30" x="1317" y="491.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="1313" y="495.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="1313" y="503.9063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="316" x="991" y="547.8965">kubernetes.default.svc</text><!--entity kubectl--><rect fill="#FEFECE" filter="url(#f1n69f9y88x016)" height="92.5938" style="stroke: #A80036; stroke-width: 3.0;" width="182" x="12" y="176.9063"/><rect fill="#FEFECE" height="20" style="stroke: #A80036; stroke-width: 3.0;" width="30" x="154" y="186.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="150" y="190.9063"/><rect fill="#FEFECE" height="4" style="stroke: #A80036; stroke-width: 3.0;" width="8" x="150" y="198.9063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="102" x="42" y="242.8965">kubectl</text><polygon fill="#FBFB77" filter="url(#f1n69f9y88x016)" points="460,699.9063,460,750.1719,738,750.1719,738,719.9063,718,699.9063,460,699.9063" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#FBFB77" points="460,699.9063,460,750.1719,738,750.1719,738,719.9063,718,699.9063,607,699.9063,599,574.6695,591,699.9063,460,699.9063" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="718" x2="718" y1="699.9063" y2="719.9063"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="738" x2="718" y1="719.9063" y2="719.9063"/><ellipse cx="483" cy="725.1719" fill="#000000" rx="5" ry="5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="494" y="734.04">TLS Passthrough</text><polygon fill="#FBFB77" filter="url(#f1n69f9y88x016)" points="1024,699.9063,1024,750.1719,1294,750.1719,1294,719.9063,1274,699.9063,1024,699.9063" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#FBFB77" points="1024,699.9063,1024,750.1719,1294,750.1719,1294,719.9063,1274,699.9063,1167,699.9063,1159,574.6695,1151,699.9063,1024,699.9063" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1274" x2="1274" y1="699.9063" y2="719.9063"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1294" x2="1274" y1="719.9063" y2="719.9063"/><ellipse cx="1047" cy="725.1719" fill="#000000" rx="5" ry="5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="206" x="1058" y="734.04">TLS Termination</text><!--link kubectl to tlsrouter_service--><path d="M194.552,222.9063 C250.978,222.9063 325.67,222.9063 395.494,222.9063 " fill="none" id="kubectl-tlsrouter_service" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="405.758,222.9063,387.758,214.9063,395.758,222.9063,387.758,230.9063,405.758,222.9063" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="138" x="231" y="209.04">HTTPS/443</text><!--link tlsrouter_service to tlsrouter_container--><path d="M599,286.5443 C599,341.0463 599,419.7683 599,471.8563 " fill="none" id="tlsrouter_service-tlsrouter_container" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="599,481.9043,607,463.9043,599,471.9043,591,463.9043,599,481.9043" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="154" x="601" y="372.04">HTTPS/8443</text><!--link tlsrouter_container to kubernetes_service--><path d="M767.018,527.9063 C824.578,527.9063 889.698,527.9063 950.092,527.9063 " fill="none" id="tlsrouter_container-kubernetes_service" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="960.524,527.9063,942.524,519.9063,950.524,527.9063,942.524,535.9063,960.524,527.9063" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="120" x="804" y="514.04">HTTP/443</text><rect fill="#DDDDDD" height="52.5938" rx="10" ry="10" style="stroke: #000000; stroke-width: 2.0;" width="660" x="398" y="785.9063"/><ellipse cx="421" cy="813.5" fill="#000000" rx="5" ry="5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="610" x="436" y="821.8965">Every namespace is joined with network id:0</text><!--
@startuml

scale 2
title tlsrouter
skinparam componentStyle uml2

component kubectl

package "Service Namespace (id:x)" {
  component "tlsrouter-service\nmyproxy.example.com" as tlsrouter_service
  component "tlsrouter-container" as tlsrouter_container
}

package "Default Namespace (id:0)" {
  component "kubernetes.default.svc" as kubernetes_service
}

kubectl -r-> tlsrouter_service : HTTPS/443
tlsrouter_service -d-> tlsrouter_container : HTTPS/8443
tlsrouter_container -r-> kubernetes_service : HTTP/443

note bottom of tlsrouter_container
  * TLS Passthrough
end note

note bottom of kubernetes_service
  * TLS Termination
end note

legend
  * Every namespace is joined with network id:0
end legend
@enduml

PlantUML version 1.2017.19(Sun Nov 12 22:46:22 AEDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 4.4.0-137-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
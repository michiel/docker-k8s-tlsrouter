<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="497px" preserveAspectRatio="none" style="width:719px;height:497px;" version="1.1" viewBox="0 0 719 497" width="719px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wez4j9d6fa2y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="76" x="328" y="16.708">tlsrouter</text><!--cluster Kubernetes cluster--><polygon fill="#FFFFFF" filter="url(#f1wez4j9d6fa2y)" points="145.5,44.9531,304.5,44.9531,311.5,67.25,697.5,67.25,697.5,369.9531,145.5,369.9531,145.5,44.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="145.5" x2="311.5" y1="67.25" y2="67.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="149.5" y="59.9482">Kubernetes cluster</text><!--cluster Service Namespace (id:x)--><polygon fill="#FFFFFF" filter="url(#f1wez4j9d6fa2y)" points="169.5,87.9531,376.5,87.9531,383.5,110.25,395.5,110.25,395.5,345.9531,169.5,345.9531,169.5,87.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="169.5" x2="383.5" y1="110.25" y2="110.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="173.5" y="102.9482">Service Namespace (id:x)</text><!--cluster Default Namespace (id:0)--><polygon fill="#FFFFFF" filter="url(#f1wez4j9d6fa2y)" points="443.5,248.9531,648.5,248.9531,655.5,271.25,673.5,271.25,673.5,345.9531,443.5,345.9531,443.5,248.9531" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="443.5" x2="655.5" y1="271.25" y2="271.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="447.5" y="263.9482">Default Namespace (id:0)</text><!--entity tlsrouter_service--><rect fill="#FEFECE" filter="url(#f1wez4j9d6fa2y)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="186" y="122.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="359" y="127.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="357" y="129.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="357" y="133.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="201" y="155.9482">tlsrouter-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="201" y="172.2451">myproxy.example.com</text><!--entity tlsrouter_container--><rect fill="#FEFECE" filter="url(#f1wez4j9d6fa2y)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="185.5" y="283.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="333.5" y="288.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="331.5" y="290.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="331.5" y="294.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="200.5" y="316.9482">tlsrouter-container</text><!--entity kubernetes_service--><rect fill="#FEFECE" filter="url(#f1wez4j9d6fa2y)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="459.5" y="283.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="637.5" y="288.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="635.5" y="290.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="635.5" y="294.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="474.5" y="316.9482">kubernetes.default.svc</text><!--entity kubectl--><rect fill="#FEFECE" filter="url(#f1wez4j9d6fa2y)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="6" y="131.4531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="77" y="136.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="75" y="138.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="75" y="142.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="21" y="164.4482">kubectl</text><polygon fill="#FBFB77" filter="url(#f1wez4j9d6fa2y)" points="200,416.9531,200,442.0859,339,442.0859,339,426.9531,329,416.9531,200,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="200,416.9531,200,442.0859,339,442.0859,339,426.9531,329,416.9531,273.5,416.9531,269.5,330.0551,265.5,416.9531,200,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="329" x2="329" y1="416.9531" y2="426.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="339" x2="329" y1="426.9531" y2="426.9531"/><ellipse cx="211.5" cy="429.5859" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="217" y="434.02">TLS Passthrough</text><polygon fill="#FBFB77" filter="url(#f1wez4j9d6fa2y)" points="491,416.9531,491,442.0859,626,442.0859,626,426.9531,616,416.9531,491,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="491,416.9531,491,442.0859,626,442.0859,626,426.9531,616,416.9531,562.5,416.9531,558.5,330.0551,554.5,416.9531,491,416.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="616" x2="616" y1="416.9531" y2="426.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="626" x2="616" y1="426.9531" y2="426.9531"/><ellipse cx="502.5" cy="429.5859" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="508" y="434.02">TLS Termination</text><!--link kubectl to tlsrouter_service--><path d="M97.1382,154.4531 C121.127,154.4531 151.556,154.4531 180.79,154.4531 " fill="none" id="kubectl-tlsrouter_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="185.85,154.4531,176.85,150.4531,180.85,154.4531,176.85,158.4531,185.85,154.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="115.5" y="147.52">TCP/443</text><!--link tlsrouter_service to tlsrouter_container--><path d="M279.838,186.2721 C277.484,213.5231 274.084,252.8841 271.834,278.9281 " fill="none" id="tlsrouter_service-tlsrouter_container" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="271.4,283.9521,276.1592,275.3295,271.83,278.9706,268.1888,274.6415,271.4,283.9521" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="278.5" y="229.02">TCP/8443</text><!--link tlsrouter_container to kubernetes_service--><path d="M353.868,306.9531 C385.26,306.9531 421.26,306.9531 454.225,306.9531 " fill="none" id="tlsrouter_container-kubernetes_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="459.489,306.9531,450.489,302.9531,454.489,306.9531,450.489,310.9531,459.489,306.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="372" y="300.02">HTTPS/443</text><rect fill="#DDDDDD" height="26.2969" rx="5" ry="5" style="stroke: #000000; stroke-width: 1.0;" width="330" x="200.5" y="459.9531"/><ellipse cx="212" cy="473.75" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="305" x="219.5" y="477.9482">Every namespace is joined with network id:0</text><!--
@startuml

title tlsrouter
skinparam componentStyle uml2

component kubectl

package "Kubernetes cluster" {
  package "Service Namespace (id:x)" {
    component "tlsrouter-service\nmyproxy.example.com" as tlsrouter_service
    component "tlsrouter-container" as tlsrouter_container
  }

  package "Default Namespace (id:0)" {
    component "kubernetes.default.svc" as kubernetes_service
  }
}

kubectl -r-> tlsrouter_service : TCP/443
tlsrouter_service -d-> tlsrouter_container : TCP/8443
tlsrouter_container -r-> kubernetes_service : HTTPS/443

note bottom of tlsrouter_container
  * TLS Passthrough
end note

note bottom of kubernetes_service
  * TLS Termination
end note

legend
  * Every namespace is joined with network id:0
end legend
@enduml

PlantUML version 1.2017.19(Sun Nov 12 22:46:22 AEDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 4.4.0-137-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>